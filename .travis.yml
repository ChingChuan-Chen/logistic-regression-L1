language: python
python:
    - 2.7
before_install:
    - wget http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh
    - chmod +x miniconda.sh
    - ./miniconda.sh -b
    - export PATH=/home/travis/miniconda2/bin:$PATH
    - conda update --yes conda
    - conda create --yes -n condaenv python=$TRAVIS_PYTHON_VERSION
    - conda install --yes -n condaenv pip
    - source activate condaenv
install:
    # Download spark 1.4.1
    - wget http://d3kbcqa49mib13.cloudfront.net/spark-1.4.1-bin-hadoop2.4.tgz || wget http://www.us.apache.org/dist/spark/spark-1.4.1/spark-1.4.1-bin-hadoop2.4.tgz || wget http://download.nextag.com/apache/spark/spark-1.4.1/spark-1.4.1-bin-hadoop2.4.tgz
    - tar -xvf spark-1.4.1-bin-hadoop2.4.tgz
    - export SPARK_HOME="$HOME/spark-1.4.1-bin-hadoop2.4"
    - export PYTHONPATH="$SPARK_HOME/python:$PYTHONPATH"
    - conda install --yes python=$TRAVIS_PYTHON_VERSION numpy scipy scikit-learn unittest2
script:
    - ./run-tests
    - pep8 --ignore=E402 ./logistic_regression_L1
after_success:
    - codecov
notifications:
    email:
        recipients:
            - stzeng@appnexus.com
            - sdevaraju@appnexus.com
